<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React | Euphoria_MZH</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="https://aliyuncdn.antdv.com/v2/assets/logo.1ef800a8.svg">
    <meta name="description" content="想拥有一个完美的博客">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.b2a16f24.css" as="style"><link rel="preload" href="/assets/js/app.3034a2ae.js" as="script"><link rel="preload" href="/assets/js/3.8a392829.js" as="script"><link rel="preload" href="/assets/js/1.b8695b8b.js" as="script"><link rel="preload" href="/assets/js/56.13bcad5a.js" as="script"><link rel="prefetch" href="/assets/js/10.676bef1a.js"><link rel="prefetch" href="/assets/js/11.2175373a.js"><link rel="prefetch" href="/assets/js/12.a4e236ab.js"><link rel="prefetch" href="/assets/js/13.9542231f.js"><link rel="prefetch" href="/assets/js/14.aa4cf985.js"><link rel="prefetch" href="/assets/js/15.5acc1b27.js"><link rel="prefetch" href="/assets/js/16.f5e97d2b.js"><link rel="prefetch" href="/assets/js/17.b68fd7da.js"><link rel="prefetch" href="/assets/js/18.7be5de17.js"><link rel="prefetch" href="/assets/js/19.94b992c6.js"><link rel="prefetch" href="/assets/js/20.f5626ee2.js"><link rel="prefetch" href="/assets/js/21.0766232a.js"><link rel="prefetch" href="/assets/js/22.dbe2cce6.js"><link rel="prefetch" href="/assets/js/23.a766af58.js"><link rel="prefetch" href="/assets/js/24.e1e9d343.js"><link rel="prefetch" href="/assets/js/25.066fe151.js"><link rel="prefetch" href="/assets/js/26.c912bcb2.js"><link rel="prefetch" href="/assets/js/27.d251f634.js"><link rel="prefetch" href="/assets/js/28.e20bd519.js"><link rel="prefetch" href="/assets/js/29.3d6326f7.js"><link rel="prefetch" href="/assets/js/30.4b69ebf4.js"><link rel="prefetch" href="/assets/js/31.4b24fab9.js"><link rel="prefetch" href="/assets/js/32.34e0b3ba.js"><link rel="prefetch" href="/assets/js/33.5d22c146.js"><link rel="prefetch" href="/assets/js/34.0fc8c1a3.js"><link rel="prefetch" href="/assets/js/35.7d0fabd5.js"><link rel="prefetch" href="/assets/js/36.4dd7595e.js"><link rel="prefetch" href="/assets/js/37.709afd6b.js"><link rel="prefetch" href="/assets/js/38.5697b11e.js"><link rel="prefetch" href="/assets/js/39.17ebd555.js"><link rel="prefetch" href="/assets/js/4.7ef01818.js"><link rel="prefetch" href="/assets/js/40.35a52045.js"><link rel="prefetch" href="/assets/js/41.89fe2f95.js"><link rel="prefetch" href="/assets/js/42.b16bb951.js"><link rel="prefetch" href="/assets/js/43.541595ba.js"><link rel="prefetch" href="/assets/js/44.9b43adaf.js"><link rel="prefetch" href="/assets/js/45.c8f7abe6.js"><link rel="prefetch" href="/assets/js/46.8b906b6a.js"><link rel="prefetch" href="/assets/js/47.1ec6859e.js"><link rel="prefetch" href="/assets/js/48.17062b9c.js"><link rel="prefetch" href="/assets/js/49.e82f56e8.js"><link rel="prefetch" href="/assets/js/5.06eb9adc.js"><link rel="prefetch" href="/assets/js/50.c36ff77f.js"><link rel="prefetch" href="/assets/js/51.d9ce6218.js"><link rel="prefetch" href="/assets/js/52.65ed3b4b.js"><link rel="prefetch" href="/assets/js/53.d63a0a76.js"><link rel="prefetch" href="/assets/js/54.8213d9a8.js"><link rel="prefetch" href="/assets/js/55.86af412f.js"><link rel="prefetch" href="/assets/js/57.39c74f7a.js"><link rel="prefetch" href="/assets/js/58.02f18b82.js"><link rel="prefetch" href="/assets/js/59.bd4b7dcd.js"><link rel="prefetch" href="/assets/js/6.90d2da83.js"><link rel="prefetch" href="/assets/js/7.58ba9b77.js"><link rel="prefetch" href="/assets/js/8.5126035f.js"><link rel="prefetch" href="/assets/js/9.67731a54.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b2a16f24.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-6f8f7dda><div data-v-6f8f7dda><div class="password-shadow password-wrapper-out" style="display:none;" data-v-f68096de data-v-6f8f7dda data-v-6f8f7dda><h3 class="title" data-v-f68096de>Euphoria_MZH</h3> <p class="description" data-v-f68096de>想拥有一个完美的博客</p> <label id="box" class="inputBox" data-v-f68096de><input type="password" value="" data-v-f68096de> <span data-v-f68096de>Konck! Knock!</span> <button data-v-f68096de>OK</button></label> <div class="footer" data-v-f68096de><span data-v-f68096de><i class="iconfont reco-theme" data-v-f68096de></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-f68096de>vuePress-theme-reco</a></span> <span data-v-f68096de><i class="iconfont reco-copyright" data-v-f68096de></i> <a data-v-f68096de><span data-v-f68096de>温</span>
          
        <span data-v-f68096de>2020 - </span>
        2023
      </a></span></div></div> <div class="hide" data-v-6f8f7dda><header class="navbar" data-v-6f8f7dda><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://aliyuncdn.antdv.com/v2/assets/logo.1ef800a8.svg" alt="Euphoria_MZH" class="logo"> <span class="site-name">Euphoria_MZH</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-WEBqianduan"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/前端/HTML/" class="nav-link"><i class="iconfont icon-html"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/前端/CSS/" class="nav-link"><i class="iconfont icon-css3"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/前端/Javascript/" class="nav-link"><i class="iconfont icon-JavaScript"></i>
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/前端/Typescript/" class="nav-link"><i class="iconfont icon-ts"></i>
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/前端/Vue/" class="nav-link"><i class="iconfont icon-Vue"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/前端/React/" class="nav-link"><i class="iconfont icon-React"></i>
  React
</a></li><li class="dropdown-item"><!----> <a href="/前端/uniapp/" class="nav-link"><i class="iconfont icon-uni-app"></i>
  Uni-app
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-houduankaifa"></i>
      后端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/后端/node/" class="nav-link"><i class="iconfont icon-node"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/后端/Java/" class="nav-link"><i class="iconfont icon-java"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/后端/Python/" class="nav-link"><i class="iconfont icon-python"></i>
  Python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-wendang"></i>
      文档
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>组件库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/文档/组件库/element.html" class="nav-link"><i class="iconfont icon-element"></i>
  Element
</a></li><li class="dropdown-subitem"><a href="/文档/组件库/antd.html" class="nav-link"><i class="iconfont icon-antdesign"></i>
  Antd
</a></li><li class="dropdown-subitem"><a href="/文档/组件库/vant.html" class="nav-link"><i class="iconfont icon-bootstrap"></i>
  Vant
</a></li></ul></li><li class="dropdown-item"><h4>第三方库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/文档/第三方库/jquery.html" class="nav-link"><i class="iconfont icon-jQuery"></i>
  Jquery
</a></li><li class="dropdown-subitem"><a href="/文档/第三方库/bootstrap.html" class="nav-link"><i class="iconfont icon-bootstrap"></i>
  Bootstrap
</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/文档/框架/Electron.html" class="nav-link"><i class="iconfont icon-electron"></i>
  Electron
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-icongongju"></i>
      常用工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>管理工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/常用工具/管理工具/Linux.html" class="nav-link"><i class="iconfont icon-linux"></i>
  Linux
</a></li><li class="dropdown-subitem"><a href="/常用工具/管理工具/git.html" class="nav-link"><i class="iconfont icon-git"></i>
  Git
</a></li><li class="dropdown-subitem"><a href="/常用工具/管理工具/npm.html" class="nav-link"><i class="iconfont icon-npm"></i>
  Npm
</a></li><li class="dropdown-subitem"><a href="/常用工具/管理工具/yarn.html" class="nav-link"><i class="iconfont icon-yarn"></i>
  Yarn
</a></li><li class="dropdown-subitem"><a href="/常用工具/管理工具/markdown.html" class="nav-link"><i class="iconfont icon-markdown"></i>
  Markdown
</a></li></ul></li><li class="dropdown-item"><h4>常用软件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/常用工具/常用软件/数据库.html" class="nav-link"><i class="iconfont icon-database-full"></i>
  数据库
</a></li><li class="dropdown-subitem"><a href="/常用工具/常用软件/云服务器.html" class="nav-link"><i class="iconfont icon-yunfuwuqi1"></i>
  云服务器
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-jiaocheng"></i>
      实用教程
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/实用教程/Windows/" class="nav-link"><i class="iconfont icon-windows"></i>
  Windows
</a></li><li class="dropdown-item"><!----> <a href="/实用教程/Mac/" class="nav-link"><i class="iconfont icon-mac"></i>
  Mac
</a></li><li class="dropdown-item"><!----> <a href="/实用教程/效率工具/" class="nav-link"><i class="iconfont icon-xiaoshuai"></i>
  效率工具
</a></li><li class="dropdown-item"><!----> <a href="/实用教程/第三方包/" class="nav-link"><i class="iconfont icon-xiaoshuai"></i>
  实用第三方包
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-wendang"></i>
      算法和数据结构
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/算法和数据结构/算法/" class="nav-link"><i class="iconfont icon-suanfaku"></i>
  算法
</a></li><li class="dropdown-item"><!----> <a href="/算法和数据结构/数据结构/" class="nav-link"><i class="iconfont icon-shujujiegou"></i>
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/算法和数据结构/面试题库/" class="nav-link"><i class="iconfont icon-mianshitiku"></i>
  面试题库
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-shenghuo"></i>
      生活
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/生活/美食/" class="nav-link"><i class="iconfont icon-airudiantubiaohuizhi-zhuanqu_meishicaipu"></i>
  美食
</a></li><li class="dropdown-item"><!----> <a href="/music.html" class="nav-link"><i class="iconfont icon-wangyiyunyinle"></i>
  音乐
</a></li><li class="dropdown-item"><!----> <a href="/生活/游戏/" class="nav-link"><i class="iconfont icon-youxi"></i>
  游戏
</a></li><li class="dropdown-item"><!----> <a href="/生活/壁纸/" class="nav-link"><i class="iconfont icon-tupian"></i>
  壁纸
</a></li><li class="dropdown-item"><!----> <a href="/生活/视频/" class="nav-link"><i class="iconfont icon-shipin"></i>
  视频
</a></li></ul></div></div><div class="nav-item"><a href="/about-me.html" class="nav-link"><i class="iconfont reco-account"></i>
  关于
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-6f8f7dda></div> <aside class="sidebar" data-v-6f8f7dda><div class="personal-info-wrapper" data-v-1600d2ca data-v-6f8f7dda><img src="https://euphoria-mzh-1306939841.cos.ap-hongkong.myqcloud.com/ava.png" alt="author-avatar" class="personal-img" data-v-1600d2ca> <h3 class="name" data-v-1600d2ca>
    温
  </h3> <h4 class="jianjie" data-v-1600d2ca>前端开发工程师</h4> <div class="num" data-v-1600d2ca><div data-v-1600d2ca><h3 data-v-1600d2ca>47</h3> <h6 data-v-1600d2ca>文章</h6></div> <div data-v-1600d2ca><h3 data-v-1600d2ca>12</h3> <h6 data-v-1600d2ca>分类</h6></div> <div data-v-1600d2ca><h3 data-v-1600d2ca>30</h3> <h6 data-v-1600d2ca>标签</h6></div></div> <ul class="social-links" data-v-1600d2ca><li class="social-item" data-v-1600d2ca><i class="iconfont reco-github" style="color:#67cc86;" data-v-1600d2ca></i></li><li class="social-item" data-v-1600d2ca><i class="iconfont reco-mayun" style="color:#f26d6d;" data-v-1600d2ca></i></li><li class="social-item" data-v-1600d2ca><i class="iconfont reco-douyin" style="color:#65c9d6;" data-v-1600d2ca></i></li><li class="social-item" data-v-1600d2ca><i class="iconfont reco-qq" style="color:#67cc86;" data-v-1600d2ca></i></li></ul> <hr data-v-1600d2ca></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-WEBqianduan"></i>
      前端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/前端/HTML/" class="nav-link"><i class="iconfont icon-html"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/前端/CSS/" class="nav-link"><i class="iconfont icon-css3"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/前端/Javascript/" class="nav-link"><i class="iconfont icon-JavaScript"></i>
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/前端/Typescript/" class="nav-link"><i class="iconfont icon-ts"></i>
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/前端/Vue/" class="nav-link"><i class="iconfont icon-Vue"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/前端/React/" class="nav-link"><i class="iconfont icon-React"></i>
  React
</a></li><li class="dropdown-item"><!----> <a href="/前端/uniapp/" class="nav-link"><i class="iconfont icon-uni-app"></i>
  Uni-app
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-houduankaifa"></i>
      后端
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/后端/node/" class="nav-link"><i class="iconfont icon-node"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/后端/Java/" class="nav-link"><i class="iconfont icon-java"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/后端/Python/" class="nav-link"><i class="iconfont icon-python"></i>
  Python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-wendang"></i>
      文档
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>组件库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/文档/组件库/element.html" class="nav-link"><i class="iconfont icon-element"></i>
  Element
</a></li><li class="dropdown-subitem"><a href="/文档/组件库/antd.html" class="nav-link"><i class="iconfont icon-antdesign"></i>
  Antd
</a></li><li class="dropdown-subitem"><a href="/文档/组件库/vant.html" class="nav-link"><i class="iconfont icon-bootstrap"></i>
  Vant
</a></li></ul></li><li class="dropdown-item"><h4>第三方库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/文档/第三方库/jquery.html" class="nav-link"><i class="iconfont icon-jQuery"></i>
  Jquery
</a></li><li class="dropdown-subitem"><a href="/文档/第三方库/bootstrap.html" class="nav-link"><i class="iconfont icon-bootstrap"></i>
  Bootstrap
</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/文档/框架/Electron.html" class="nav-link"><i class="iconfont icon-electron"></i>
  Electron
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-icongongju"></i>
      常用工具
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>管理工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/常用工具/管理工具/Linux.html" class="nav-link"><i class="iconfont icon-linux"></i>
  Linux
</a></li><li class="dropdown-subitem"><a href="/常用工具/管理工具/git.html" class="nav-link"><i class="iconfont icon-git"></i>
  Git
</a></li><li class="dropdown-subitem"><a href="/常用工具/管理工具/npm.html" class="nav-link"><i class="iconfont icon-npm"></i>
  Npm
</a></li><li class="dropdown-subitem"><a href="/常用工具/管理工具/yarn.html" class="nav-link"><i class="iconfont icon-yarn"></i>
  Yarn
</a></li><li class="dropdown-subitem"><a href="/常用工具/管理工具/markdown.html" class="nav-link"><i class="iconfont icon-markdown"></i>
  Markdown
</a></li></ul></li><li class="dropdown-item"><h4>常用软件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/常用工具/常用软件/数据库.html" class="nav-link"><i class="iconfont icon-database-full"></i>
  数据库
</a></li><li class="dropdown-subitem"><a href="/常用工具/常用软件/云服务器.html" class="nav-link"><i class="iconfont icon-yunfuwuqi1"></i>
  云服务器
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-jiaocheng"></i>
      实用教程
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/实用教程/Windows/" class="nav-link"><i class="iconfont icon-windows"></i>
  Windows
</a></li><li class="dropdown-item"><!----> <a href="/实用教程/Mac/" class="nav-link"><i class="iconfont icon-mac"></i>
  Mac
</a></li><li class="dropdown-item"><!----> <a href="/实用教程/效率工具/" class="nav-link"><i class="iconfont icon-xiaoshuai"></i>
  效率工具
</a></li><li class="dropdown-item"><!----> <a href="/实用教程/第三方包/" class="nav-link"><i class="iconfont icon-xiaoshuai"></i>
  实用第三方包
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-wendang"></i>
      算法和数据结构
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/算法和数据结构/算法/" class="nav-link"><i class="iconfont icon-suanfaku"></i>
  算法
</a></li><li class="dropdown-item"><!----> <a href="/算法和数据结构/数据结构/" class="nav-link"><i class="iconfont icon-shujujiegou"></i>
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/算法和数据结构/面试题库/" class="nav-link"><i class="iconfont icon-mianshitiku"></i>
  面试题库
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-shenghuo"></i>
      生活
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/生活/美食/" class="nav-link"><i class="iconfont icon-airudiantubiaohuizhi-zhuanqu_meishicaipu"></i>
  美食
</a></li><li class="dropdown-item"><!----> <a href="/music.html" class="nav-link"><i class="iconfont icon-wangyiyunyinle"></i>
  音乐
</a></li><li class="dropdown-item"><!----> <a href="/生活/游戏/" class="nav-link"><i class="iconfont icon-youxi"></i>
  游戏
</a></li><li class="dropdown-item"><!----> <a href="/生活/壁纸/" class="nav-link"><i class="iconfont icon-tupian"></i>
  壁纸
</a></li><li class="dropdown-item"><!----> <a href="/生活/视频/" class="nav-link"><i class="iconfont icon-shipin"></i>
  视频
</a></li></ul></div></div><div class="nav-item"><a href="/about-me.html" class="nav-link"><i class="iconfont reco-account"></i>
  关于
</a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>面试题库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/" aria-current="page" class="sidebar-link">面试题库</a></li><li><a href="/算法和数据结构/面试题库/css.html" class="sidebar-link">CSS</a></li><li><a href="/算法和数据结构/面试题库/html.html" class="sidebar-link">Html</a></li><li><a href="/算法和数据结构/面试题库/js.html" class="sidebar-link">JavaScript</a></li><li><a href="/算法和数据结构/面试题库/react.html" class="active sidebar-link">React</a></li><li><a href="/算法和数据结构/面试题库/vue.html" class="sidebar-link">Vue</a></li><li><a href="/算法和数据结构/面试题库/浏览器网络.html" class="sidebar-link">浏览器网络</a></li><li><a href="/算法和数据结构/面试题库/项目.html" class="sidebar-link">项目方面</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-f68096de data-v-6f8f7dda><h3 class="title" data-v-f68096de>React</h3> <!----> <label id="box" class="inputBox" data-v-f68096de><input type="password" value="" data-v-f68096de> <span data-v-f68096de>Konck! Knock!</span> <button data-v-f68096de>OK</button></label> <div class="footer" data-v-f68096de><span data-v-f68096de><i class="iconfont reco-theme" data-v-f68096de></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-f68096de>vuePress-theme-reco</a></span> <span data-v-f68096de><i class="iconfont reco-copyright" data-v-f68096de></i> <a data-v-f68096de><span data-v-f68096de>温</span>
          
        <span data-v-f68096de>2020 - </span>
        2023
      </a></span></div></div> <div data-v-6f8f7dda><div data-v-6f8f7dda><main class="page"><section style="display:;"><div class="page-title" style="background:url(/images/9.jpg) center/cover no-repeat;"><h1 class="title">React</h1> <div data-v-1e62957f><i class="iconfont reco-account" data-v-1e62957f><span data-v-1e62957f>温</span></i> <i class="iconfont reco-date" data-v-1e62957f><span data-v-1e62957f>5/29/2020</span></i> <!----> <i class="tags iconfont reco-tag" data-v-1e62957f><span class="tag-item" data-v-1e62957f>面试</span></i></div></div> <div class="theme-reco-content content__default"><div class="custom-block tip"><p class="title"></p><p>React面试题</p></div> <h2 id="react-js是-mvvm-框架吗"><a href="#react-js是-mvvm-框架吗" class="header-anchor">#</a> React.js是 MVVM 框架吗?</h2> <p>React就是Facebook的一个开源JS框架，专注的层面为View层，不包括数据访问层或者那种Hash路由（不过React 有插件支持），与Angularjs，Emberjs等大而全的框架不同，React专注的中心是Component，即组件。React认为一切页面元 素都可以抽象成组件，比如一个表单，或者表单中的某一项。</p> <p>React可以作为MVVM中第二个V，也就是View，但是并不是MVVM框架。MVVM一个最显著的特征：双向绑定。React没有这个，它是单向数据绑定的。React是一个单向数据流的库，状态驱动视图。react整体是函数式的思想，把组件设计成纯组件，状态和逻辑通过参数传入，所以在react中，是单向数据流，推崇结合immutable来实现数据不可变。</p> <h2 id="hooks用过吗-聊聊react中class组件和函数组件的区别"><a href="#hooks用过吗-聊聊react中class组件和函数组件的区别" class="header-anchor">#</a> hooks用过吗？聊聊react中class组件和函数组件的区别</h2> <p>类组件是使用ES6 的 class 来定义的组件。 函数组件是接收一个单一的 <code>props</code> 对象并返回一个React元素。</p> <p>关于React的两套API（类（class）API 和基于函数的钩子（hooks） API）。官方推荐使用钩子（函数），而不是类。因为钩子更简洁，代码量少，用起来比较&quot;轻&quot;，而类比较&quot;重&quot;。而且，钩子是函数，更符合 React 函数式的本质。</p> <p>函数一般来说，只应该做一件事，就是返回一个值。 如果你有多个操作，每个操作应该写成一个单独的函数。而且，数据的状态应该与操作方法分离。根据函数这种理念，React 的函数组件只应该做一件事情：返回组件的 HTML 代码，而没有其他的功能。函数的返回结果只依赖于它的参数。不改变函数体外部数据、函数执行过程里面没有副作用。</p> <p>类（class）是数据和逻辑的封装。 也就是说，组件的状态和操作方法是封装在一起的。如果选择了类的写法，就应该把相关的数据和操作，都写在同一个 class 里面。</p> <p><strong>类组件的缺点</strong> :</p> <p>大型组件很难拆分和重构，也很难测试。<br>
业务逻辑分散在组件的各个方法之中，导致重复逻辑或关联逻辑。<br>
组件类引入了复杂的编程模式，比如 render props 和高阶组件。<br>
难以理解的 class，理解 JavaScript 中 <code>this</code> 的工作方式。</p> <p><strong>区别</strong>：</p> <p>函数组件的性能比类组件的性能要高，因为类组件使用的时候要实例化，而函数组件直接执行函数取返回结果即可。</p> <p>1.状态的有无<br>
hooks出现之前，函数组件<code>没有实例</code>，<code>没有生命周期</code>，<code>没有state</code>，<code>没有this</code>，所以我们称函数组件为无状态组件。 hooks出现之前，react中的函数组件通常只考虑负责UI的渲染，没有自身的状态没有业务逻辑代码，是一个纯函数。它的输出只由参数props决定，不受其他任何因素影响。</p> <p>2.调用方式的不同<br>
函数组件重新渲染，将重新调用组件方法返回新的react元素。类组件重新渲染将new一个新的组件实例，然后调用render类方法返回react元素，这也说明为什么类组件中this是可变的。</p> <p>3.因为调用方式不同，在函数组件使用中会出现问题<br>
在操作中改变状态值，类组件可以获取最新的状态值，而函数组件则会按照顺序返回状态值</p> <p><strong>React Hooks（钩子的作用）</strong></p> <p><em>Hook</em> 是 React 16.8 的新增特性。它可以让你在不编写 class 的情况下使用 state 以及其他的 React 特性。</p> <p>React Hooks的几个常用钩子:</p> <ol><li><code>useState()</code> //状态钩子</li> <li><code>useContext()</code> //共享状态钩子</li> <li><code>useReducer()</code> //action 钩子</li> <li><code>useEffect()</code> //副作用钩子</li></ol> <p>还有几个不常见的大概的说下，后续会专门写篇文章描述下</p> <ul><li><p>1.useCallback 记忆函数 一般把<strong>函数式组件理解为class组件render函数的语法糖</strong>，所以每次重新渲染的时候，函数式组件内部所有的代码都会重新执行一遍。而有了 useCallback 就不一样了，你可以通过 useCallback 获得一个记忆后的函数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> memoizedHandleClick <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Click happened'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 空数组代表无论什么情况下该函数都不会发生改变</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>SomeComponent onClick<span class="token operator">=</span><span class="token punctuation">{</span>memoizedHandleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>Click Me<span class="token operator">&lt;</span><span class="token operator">/</span>SomeComponent<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>第二个参数传入一个数组，数组中的每一项一旦值或者引用发生改变，useCallback 就会重新返回一个新的记忆函数提供给后面进行渲染。</p></li> <li><p>2.useMemo 记忆组件 useCallback 的功能完全可以由 useMemo 所取代，如果你想通过使用 useMemo 返回一个记忆函数也是完全可以的。 唯一的区别是：<strong>useCallback 不会执行第一个参数函数，而是将它返回给你，而 useMemo 会执行第一个函数并且将函数执行结果返回给你</strong>。<br>
所以 useCallback 常用记忆事件函数，生成记忆后的事件函数并传递给子组件使用。而 useMemo 更适合经过函数计算得到一个确定的值，比如记忆组件。</p></li> <li><p>3.useRef 保存引用值</p> <p>useRef 跟 createRef 类似，都可以用来生成对 DOM 对象的引用。useRef 返回的值传递给组件或者 DOM 的 ref 属性，就可以通过 ref.current 值<strong>访问组件或真实的 DOM 节点，重点是组件也是可以访问到的</strong>，从而可以对 DOM 进行一些操作，比如监听事件等等。</p></li> <li><p>4.useImperativeHandle 穿透 Ref</p> <p>通过 useImperativeHandle 用于让父组件获取子组件内的索引</p></li> <li><p>5.useLayoutEffect 同步执行副作用</p> <p>大部分情况下，使用 useEffect 就可以帮我们处理组件的副作用，但是如果想要同步调用一些副作用，比如对 DOM 的操作，就需要使用 useLayoutEffect，useLayoutEffect 中的副作用会在 DOM 更新之后同步执行。</p> <p><strong>useEffect和useLayoutEffect有什么区别</strong>：简单来说就是调用时机不同，useLayoutEffect和原来componentDidMount&amp;componentDidUpdate一致，在react完成DOM更新后马上同步调用的代码，会阻塞页面渲染。而useEffect是会在整个页面渲染完才会调用的代码。<code>官方建议优先使用useEffect</code></p></li></ul> <h2 id="react-组件通信方式"><a href="#react-组件通信方式" class="header-anchor">#</a> React 组件通信方式</h2> <p>react组件间通信常见的几种情况:</p> <ul><li><ol><li>父组件向子组件通信</li></ol></li> <li><ol start="2"><li>子组件向父组件通信</li></ol></li> <li><ol start="3"><li>跨级组件通信</li></ol></li> <li><ol start="4"><li>非嵌套关系的组件通信</li></ol></li></ul> <h3 id="_1-父组件向子组件通信"><a href="#_1-父组件向子组件通信" class="header-anchor">#</a> 1）父组件向子组件通信</h3> <p>父组件通过 props 向子组件传递需要的信息。父传子是在父组件中直接绑定一个正常的属性，这个属性就是指具体的值，在子组件中，用props就可以获取到这个值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 子组件: Child</span>
<span class="token keyword">const</span> <span class="token function-variable function">Child</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 父组件 Parent</span>
<span class="token keyword">const</span> <span class="token function-variable function">Parent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Child name<span class="token operator">=</span><span class="token string">&quot;京程一灯&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Child<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-子组件向父组件通信"><a href="#_2-子组件向父组件通信" class="header-anchor">#</a> 2）子组件向父组件通信</h3> <p>props+回调的方式，使用公共组件进行状态提升。子传父是先在父组件上绑定属性设置为一个函数，当子组件需要给父组件传值的时候，则通过props调用该函数将参数传入到该函数当中，此时就可以在父组件中的函数中接收到该参数了，这个参数则为子组件传过来的值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 子组件: Child</span>
<span class="token keyword">const</span> <span class="token function-variable function">Child</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">cb</span> <span class="token operator">=</span> <span class="token parameter">msg</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
          props<span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">cb</span><span class="token punctuation">(</span><span class="token string">&quot;京程一灯欢迎你!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>京程一灯欢迎你<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 父组件 Parent</span>
<span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>Child callback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Child<span class="token operator">&gt;</span>    
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-跨级组件通信"><a href="#_3-跨级组件通信" class="header-anchor">#</a> 3）跨级组件通信</h3> <p>即父组件向子组件的子组件通信，向更深层子组件通信。</p> <ul><li>使用props，利用中间组件层层传递,但是如果父组件结构较深，那么中间每一层组件都要去传递props，增加了复杂度，并且这些props并不是中间组件自己需要的。</li> <li>使用context，context相当于一个大容器，我们可以把要通信的内容放在这个容器中，这样不管嵌套多深，都可以随意取用，对于跨越多层的全局数据可以使用context实现。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// context方式实现跨级组件通信 </span>
<span class="token comment">// Context 设计目的是为了共享那些对于一个组件树而言是“全局”的数据</span>

<span class="token keyword">const</span> BatteryContext <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//  子组件的子组件 </span>
<span class="token keyword">class</span> <span class="token class-name">GrandChild</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>BatteryContext<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span>
                    <span class="token parameter">color</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>h1 style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token string-property property">&quot;color&quot;</span><span class="token operator">:</span>color<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>我是红色的<span class="token operator">:</span><span class="token punctuation">{</span>color<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
                <span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>BatteryContext<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//  子组件</span>
<span class="token keyword">const</span> <span class="token function-variable function">Child</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>GrandChild<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 父组件</span>
<span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
      state <span class="token operator">=</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">&quot;red&quot;</span>
      <span class="token punctuation">}</span>
      <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">const</span> <span class="token punctuation">{</span>color<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>BatteryContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span>color<span class="token punctuation">}</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>Child<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Child<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>BatteryContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span> 
          <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-非嵌套关系的组件通信"><a href="#_4-非嵌套关系的组件通信" class="header-anchor">#</a> 4）非嵌套关系的组件通信</h3> <p>即没有任何包含关系的组件，包括兄弟组件以及不在同一个父级中的非兄弟组件。</p> <ul><li><ol><li>可以使用自定义事件通信（发布订阅模式），使用pubsub-js</li></ol></li> <li><ol start="2"><li>可以通过redux等进行全局状态管理</li></ol></li> <li><ol start="3"><li>如果是兄弟组件通信，可以找到这两个兄弟节点共同的父节点, 结合父子间通信方式进行通信。</li></ol></li> <li><ol start="4"><li>也可以new一个 Vue 的 EventBus,进行事件监听，一边执行监听，一边执行新增 VUE的eventBus 就是发布订阅模式，是可以在React中使用的;</li></ol></li></ul> <h2 id="setstate-既存在异步情况也存在同步情况"><a href="#setstate-既存在异步情况也存在同步情况" class="header-anchor">#</a> setState 既存在异步情况也存在同步情况</h2> <p>1.异步情况 在<code>React事件当中是异步操作</code></p> <p>2.同步情况 如果是在<code>setTimeout事件或者自定义的dom事件</code>中，都是同步的</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//setTimeout事件</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span><span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Count</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">0</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>count<span class="token operator">:</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>btnAction<span class="token punctuation">}</span><span class="token operator">&gt;</span>增加<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function-variable function">btnAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token comment">//不能直接修改state，需要通过setState进行修改</span>
        <span class="token comment">//同步</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Count<span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//自定义dom事件</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span><span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Count</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">count</span><span class="token operator">:</span><span class="token number">0</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>count<span class="token operator">:</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;btn&quot;</span><span class="token operator">&gt;</span>绑定点击事件<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//自定义dom事件，也是同步修改</span>
        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Count<span class="token punctuation">;</span>
</code></pre></div><h2 id="生命周期"><a href="#生命周期" class="header-anchor">#</a> 生命周期</h2> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8bae01e6eb804d849e5bb889f787707d~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"></p> <div class="language-js extra-class"><pre class="language-js"><code>安装
当组件的实例被创建并插入到 <span class="token constant">DOM</span> 中时，这些方法按以下顺序调用：

<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">static</span> <span class="token function">getDerivedStateFromProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

更新中
更新可能由道具或状态的更改引起。当重新渲染组件时，这些方法按以下顺序调用：

<span class="token keyword">static</span> <span class="token function">getDerivedStateFromProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">getSnapshotBeforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

卸载
当组件从 <span class="token constant">DOM</span> 中移除时调用此方法：

<span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="说一下-react-fiber"><a href="#说一下-react-fiber" class="header-anchor">#</a> 说一下 react-fiber</h2> <h3 id="_1-背景"><a href="#_1-背景" class="header-anchor">#</a> 1）背景</h3> <p>react-fiber 产生的根本原因，是<code>大量的同步计算任务阻塞了浏览器的 UI 渲染</code>。默认情况下，JS 运算、页面布局和页面绘制都是运行在浏览器的主线程当中，他们之间是互斥的关系。如果 JS 运算持续占用主线程，页面就没法得到及时的更新。当我们调用<code>setState</code>更新页面的时候，React 会遍历应用的所有节点，计算出差异，然后再更新 UI。如果页面元素很多，整个过程占用的时机就可能超过 16 毫秒，就容易出现掉帧的现象。</p> <h3 id="_2-实现原理"><a href="#_2-实现原理" class="header-anchor">#</a> 2）实现原理</h3> <ul><li><p>react内部运转分三层：</p> <ul><li>Virtual DOM 层，描述页面长什么样。</li> <li>Reconciler 层，负责调用组件生命周期方法，进行 Diff 运算等。</li> <li>Renderer 层，根据不同的平台，渲染出相应的页面，比较常见的是 ReactDOM 和 ReactNative。</li></ul></li></ul> <p><code>Fiber 其实指的是一种数据结构，它可以用一个纯 JS 对象来表示</code>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fiber <span class="token operator">=</span> <span class="token punctuation">{</span>
    stateNode<span class="token punctuation">,</span>    <span class="token comment">// 节点实例</span>
    child<span class="token punctuation">,</span>        <span class="token comment">// 子节点</span>
    sibling<span class="token punctuation">,</span>      <span class="token comment">// 兄弟节点</span>
    <span class="token keyword">return</span><span class="token punctuation">,</span>       <span class="token comment">// 父节点</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p>为了实现不卡顿，就需要有一个调度器 (Scheduler) 来进行任务分配。优先级高的任务（如键盘输入）可以打断优先级低的任务（如Diff）的执行，从而更快的生效。任务的优先级有六种：</p> <ul><li>synchronous，与之前的Stack Reconciler操作一样，同步执行</li> <li>task，在next tick之前执行</li> <li>animation，下一帧之前执行</li> <li>high，在不久的将来立即执行</li> <li>low，稍微延迟执行也没关系</li> <li>offscreen，下一次render时或scroll时才执行</li></ul></li> <li><p>Fiber Reconciler（react ）执行过程分为2个阶段：</p> <ul><li>阶段一，生成 Fiber 树，得出需要更新的节点信息。这一步是一个渐进的过程，可以被打断。阶段一可被打断的特性，让优先级更高的任务先执行，从框架层面大大降低了页面掉帧的概率。</li> <li>阶段二，将需要更新的节点一次过批量更新，这个过程不能被打断。</li></ul></li> <li><p>Fiber树：React 在 render 第一次渲染时，会通过 React.createElement 创建一颗 Element 树，可以称之为 Virtual DOM Tree，由于要记录上下文信息，加入了 Fiber，每一个 Element 会对应一个 Fiber Node，将 Fiber Node 链接起来的结构成为 Fiber Tree。Fiber Tree 一个重要的特点是链表结构，将递归遍历编程循环遍历，然后配合 requestIdleCallback API, 实现任务拆分、中断与恢复。</p></li></ul> <p>从Stack Reconciler到Fiber Reconciler，源码层面其实就是干了一件递归改循环的事情</p> <p>传送门 ☞<a href="https://juejin.cn/post/7002250258826657799" target="_blank" rel="noopener noreferrer"># 深入了解 Fiber<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="portals"><a href="#portals" class="header-anchor">#</a> Portals</h2> <p>Portals 提供了一种一流的方式来将子组件渲染到存在于父组件的 DOM 层次结构之外的 DOM 节点中。结构不受外界的控制的情况下就可以使用portals进行创建</p> <h2 id="何时要使用异步组件-如和使用异步组件"><a href="#何时要使用异步组件-如和使用异步组件" class="header-anchor">#</a> 何时要使用异步组件？如和使用异步组件</h2> <ul><li>加载大组件的时候</li> <li>路由异步加载的时候</li></ul> <p>react 中要配合 Suspense 使用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 异步懒加载</span>
<span class="token keyword">const</span> Box <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./components/Box'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用组件的时候要用suspense进行包裹</span>
<span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>show <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>Box<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span>
</code></pre></div><h2 id="react-事件绑定原理"><a href="#react-事件绑定原理" class="header-anchor">#</a> React 事件绑定原理</h2> <p>React并不是将click事件绑在该div的真实DOM上，而是<code>在document处监听所有支持的事件</code>，当事件发生并冒泡至document处时，React将事件内容封装并交由真正的处理函数运行。这样的方式不仅减少了内存消耗，还能在组件挂载销毁时统一订阅和移除事件。<br>
另外冒泡到 document 上的事件也不是原生浏览器事件，而是 React 自己实现的合成事件（SyntheticEvent）。因此我们如果不想要事件冒泡的话，调用 event.stopPropagation 是无效的，而应该调用 <code>event.preventDefault</code>。</p> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2089718f74b342869de15f01588f033f~tplv-k3u1fbpfcp-zoom-1.image" alt="react事件绑定原理"></p> <h2 id="react-lazy-实现的原理"><a href="#react-lazy-实现的原理" class="header-anchor">#</a> React.lazy() 实现的原理</h2> <p>React的懒加载示例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Suspense <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> OtherComponent <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./OtherComponent'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>OtherComponent <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>React.lazy 原理</strong></p> <p>以下 React 源码基于 16.8.0 版本</p> <p>React.lazy 的源码实现如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> lazy<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token function-variable function">ctor</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Thenable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> LazyComponent<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> lazyType <span class="token operator">=</span> <span class="token punctuation">{</span>
    $$<span class="token keyword">typeof</span><span class="token operator">:</span> <span class="token constant">REACT_LAZY_TYPE</span><span class="token punctuation">,</span>
    <span class="token literal-property property">_ctor</span><span class="token operator">:</span> ctor<span class="token punctuation">,</span>
    <span class="token comment">// React uses these fields to store the result.</span>
    <span class="token literal-property property">_status</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">_result</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> lazyType<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>可以看到其返回了一个 LazyComponent 对象。</p> <p>而对于 LazyComponent 对象的解析：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">case</span> <span class="token literal-property property">LazyComponent</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> elementType <span class="token operator">=</span> workInProgress<span class="token punctuation">.</span>elementType<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">mountLazyComponent</span><span class="token punctuation">(</span>
    current<span class="token punctuation">,</span>
    workInProgress<span class="token punctuation">,</span>
    elementType<span class="token punctuation">,</span>
    updateExpirationTime<span class="token punctuation">,</span>
    renderExpirationTime<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">mountLazyComponent</span><span class="token punctuation">(</span>
  <span class="token parameter">_current<span class="token punctuation">,</span>
  workInProgress<span class="token punctuation">,</span>
  elementType<span class="token punctuation">,</span>
  updateExpirationTime<span class="token punctuation">,</span>
  renderExpirationTime<span class="token punctuation">,</span></span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token operator">...</span>
  <span class="token keyword">let</span> Component <span class="token operator">=</span> <span class="token function">readLazyComponentType</span><span class="token punctuation">(</span>elementType<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Pending = 0, Resolved = 1, Rejected = 2</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> readLazyComponentType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>lazyComponent<span class="token operator">:</span> LazyComponent<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> status <span class="token operator">=</span> lazyComponent<span class="token punctuation">.</span>_status<span class="token punctuation">;</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> lazyComponent<span class="token punctuation">.</span>_result<span class="token punctuation">;</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token literal-property property">Resolved</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token literal-property property">Component</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token operator">=</span> result<span class="token punctuation">;</span>
      <span class="token keyword">return</span> Component<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token literal-property property">Rejected</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token literal-property property">error</span><span class="token operator">:</span> mixed <span class="token operator">=</span> result<span class="token punctuation">;</span>
      <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token literal-property property">Pending</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token literal-property property">thenable</span><span class="token operator">:</span> Thenable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> mixed<span class="token operator">&gt;</span> <span class="token operator">=</span> result<span class="token punctuation">;</span>
      <span class="token keyword">throw</span> thenable<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// lazyComponent 首次被渲染</span>
      lazyComponent<span class="token punctuation">.</span>_status <span class="token operator">=</span> Pending<span class="token punctuation">;</span>
      <span class="token keyword">const</span> ctor <span class="token operator">=</span> lazyComponent<span class="token punctuation">.</span>_ctor<span class="token punctuation">;</span>
      <span class="token keyword">const</span> thenable <span class="token operator">=</span> <span class="token function">ctor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      thenable<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
        <span class="token parameter">moduleObject</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>lazyComponent<span class="token punctuation">.</span>_status <span class="token operator">===</span> Pending<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> defaultExport <span class="token operator">=</span> moduleObject<span class="token punctuation">.</span>default<span class="token punctuation">;</span>
            lazyComponent<span class="token punctuation">.</span>_status <span class="token operator">=</span> Resolved<span class="token punctuation">;</span>
            lazyComponent<span class="token punctuation">.</span>_result <span class="token operator">=</span> defaultExport<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>lazyComponent<span class="token punctuation">.</span>_status <span class="token operator">===</span> Pending<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            lazyComponent<span class="token punctuation">.</span>_status <span class="token operator">=</span> Rejected<span class="token punctuation">;</span>
            lazyComponent<span class="token punctuation">.</span>_result <span class="token operator">=</span> error<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// Handle synchronous thenables.</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>lazyComponent<span class="token punctuation">.</span>_status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token literal-property property">Resolved</span><span class="token operator">:</span>
          <span class="token keyword">return</span> lazyComponent<span class="token punctuation">.</span>_result<span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token literal-property property">Rejected</span><span class="token operator">:</span>
          <span class="token keyword">throw</span> lazyComponent<span class="token punctuation">.</span>_result<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      lazyComponent<span class="token punctuation">.</span>_result <span class="token operator">=</span> thenable<span class="token punctuation">;</span>
      <span class="token keyword">throw</span> thenable<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注：如果 readLazyComponentType 函数多次处理同一个 lazyComponent，则可能进入Pending、Rejected等 case 中。</p> <p>从上述代码中可以看出，对于最初 React.lazy() 所返回的 LazyComponent 对象，其 _status 默认是 -1，所以首次渲染时，会进入 readLazyComponentType 函数中的 default 的逻辑，这里才会真正异步执行 import(url)操作，由于并未等待，随后会检查模块是否 Resolved，如果已经Resolved了（已经加载完毕）则直接返回moduleObject.default（动态加载的模块的默认导出），否则将通过 throw 将 thenable 抛出到上层。</p> <p>为什么要 throw 它？这就要涉及到 Suspense 的工作原理，我们接着往下分析。</p> <p><strong>Suspense 原理</strong></p> <p>由于 React 捕获异常并处理的代码逻辑比较多，这里就不贴源码，感兴趣可以去看 throwException 中的逻辑，其中就包含了如何处理捕获的异常。简单描述一下处理过程，React 捕获到异常之后，会判断异常是不是一个 thenable，如果是则会找到 SuspenseComponent ，如果 thenable 处于 pending 状态，则会将其 children 都渲染成 fallback 的值，一旦 thenable 被 resolve 则 SuspenseComponent 的子组件会重新渲染一次。</p> <p>为了便于理解，我们也可以用 componentDidCatch 实现一个自己的 Suspense 组件，如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Suspense</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">promise</span><span class="token operator">:</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidCatch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 判断 err 是否是 thenable</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> err <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> err<span class="token punctuation">.</span>then <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">promise</span><span class="token operator">:</span> err <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        err<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">promise</span><span class="token operator">:</span> <span class="token keyword">null</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> fallback<span class="token punctuation">,</span> children <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    <span class="token keyword">const</span> <span class="token punctuation">{</span> promise <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
    <span class="token keyword">return</span> <span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span> promise <span class="token operator">?</span> fallback <span class="token operator">:</span> children <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>至此，我们分析完了 React 的懒加载原理。简单来说，React利用 React.lazy与import()实现了渲染时的动态加载 ，并利用Suspense来处理异步加载资源时页面应该如何显示的问题。</p> <p>参考传送门☞ <a href="https://thoamsy.github.io/blogs/react-lazy/" target="_blank" rel="noopener noreferrer">React Lazy 的实现原理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/算法和数据结构/面试题库/js.html" class="prev">
          JavaScript
        </a></span> <span class="next"><a href="/算法和数据结构/面试题库/vue.html">
          Vue
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-6986a797 data-v-6f8f7dda><li class="level-2" data-v-6986a797><a href="/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/react.html#react-js是-mvvm-框架吗" class="sidebar-link reco-side-react-js是-mvvm-框架吗" data-v-6986a797>React.js是 MVVM 框架吗?</a></li><li class="level-2" data-v-6986a797><a href="/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/react.html#hooks用过吗-聊聊react中class组件和函数组件的区别" class="sidebar-link reco-side-hooks用过吗-聊聊react中class组件和函数组件的区别" data-v-6986a797>hooks用过吗？聊聊react中class组件和函数组件的区别</a></li><li class="level-2" data-v-6986a797><a href="/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/react.html#react-组件通信方式" class="sidebar-link reco-side-react-组件通信方式" data-v-6986a797>React 组件通信方式</a></li><li class="level-3" data-v-6986a797><a href="/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/react.html#_1-父组件向子组件通信" class="sidebar-link reco-side-_1-父组件向子组件通信" data-v-6986a797>1）父组件向子组件通信</a></li><li class="level-3" data-v-6986a797><a href="/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/react.html#_2-子组件向父组件通信" class="sidebar-link reco-side-_2-子组件向父组件通信" data-v-6986a797>2）子组件向父组件通信</a></li><li class="level-3" data-v-6986a797><a href="/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/react.html#_3-跨级组件通信" class="sidebar-link reco-side-_3-跨级组件通信" data-v-6986a797>3）跨级组件通信</a></li><li class="level-3" data-v-6986a797><a href="/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/react.html#_4-非嵌套关系的组件通信" class="sidebar-link reco-side-_4-非嵌套关系的组件通信" data-v-6986a797>4）非嵌套关系的组件通信</a></li><li class="level-2" data-v-6986a797><a href="/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/react.html#setstate-既存在异步情况也存在同步情况" class="sidebar-link reco-side-setstate-既存在异步情况也存在同步情况" data-v-6986a797>setState 既存在异步情况也存在同步情况</a></li><li class="level-2" data-v-6986a797><a href="/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/react.html#生命周期" class="sidebar-link reco-side-生命周期" data-v-6986a797>生命周期</a></li><li class="level-2" data-v-6986a797><a href="/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/react.html#说一下-react-fiber" class="sidebar-link reco-side-说一下-react-fiber" data-v-6986a797>说一下 react-fiber</a></li><li class="level-3" data-v-6986a797><a href="/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/react.html#_1-背景" class="sidebar-link reco-side-_1-背景" data-v-6986a797>1）背景</a></li><li class="level-3" data-v-6986a797><a href="/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/react.html#_2-实现原理" class="sidebar-link reco-side-_2-实现原理" data-v-6986a797>2）实现原理</a></li><li class="level-2" data-v-6986a797><a href="/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/react.html#portals" class="sidebar-link reco-side-portals" data-v-6986a797>Portals</a></li><li class="level-2" data-v-6986a797><a href="/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/react.html#何时要使用异步组件-如和使用异步组件" class="sidebar-link reco-side-何时要使用异步组件-如和使用异步组件" data-v-6986a797>何时要使用异步组件？如和使用异步组件</a></li><li class="level-2" data-v-6986a797><a href="/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/react.html#react-事件绑定原理" class="sidebar-link reco-side-react-事件绑定原理" data-v-6986a797>React 事件绑定原理</a></li><li class="level-2" data-v-6986a797><a href="/%E7%AE%97%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93/react.html#react-lazy-实现的原理" class="sidebar-link reco-side-react-lazy-实现的原理" data-v-6986a797>React.lazy() 实现的原理</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.3034a2ae.js" defer></script><script src="/assets/js/3.8a392829.js" defer></script><script src="/assets/js/1.b8695b8b.js" defer></script><script src="/assets/js/56.13bcad5a.js" defer></script>
  </body>
</html>
